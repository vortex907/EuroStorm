### TANKS
#POSITION
@tank_1_X = 9
@tank_1_Y = 2
@tank_2_X = 9
@tank_2_Y = 3
@tank_3_X = 9
@tank_3_Y = 4
#BONUSES
@tank_max_speed = 0.05
@tank_production_capacity_factor = 0.05
@tank_soft_attack = 0.05

### AIRCRAFT
#POSITION
@aircraft_1_X = 9
@aircraft_1_Y = 2
@aircraft_2_X = 9
@aircraft_2_Y = 3
@aircraft_3_X = 9
@aircraft_3_Y = 4
#BONUSES
@aircraft_production_cost_factor = -0.05
@aircraft_air_agility = 0.05
@aircraft_air_defence = 0.1
@aircraft_surface_detection = 0.15
@aircraft_sub_detection = 0.15

###SHIPS
#BONUSES
@ship_cruiser_production_cost_factor = -0.1
@ship_destroyer_production_cost_factor = -0.1
@ship_submarine_production_cost_factor = -0.1
@ship_production_capacity_factor = -0.05
@ship_mines_sweeping = 0.1
@ship_mines_planting = 0.1

###MATERIEL
#BONUSES
@artillery_production_cost_factor = -0.1
@infantry_equipment_production_cost_factor = -0.1
@motorized_production_cost_factor = -0.1
@materiel_production_efficiency_cap_factor = 0.1
@materiel_production_capacity_factor = 0.1


#####################

###  ##  #  # # #  ## 
 #  #  # ## # # # #   
 #  #### # ## ##   #  
 #  #  # #  # # #   # 
 #  #  # #  # # # ## 

##################### 

generic_modern_tank_organization = {
	icon = GFX_idea_generic_tank_manufacturer_2
	name = mbt_organization
	allowed = {
		always = no # Archetype only - countries using it have their own verisons
	}

	available = {
		owner ={
			has_tech = main_battle_tank_chassis
		}
	}
	equipment_type = { mio_cat_eq_all_modern_tank }
	research_categories = { mio_cat_tech_modern_armor_and_modules }

	tree_header_text = {
		text = mio_header_design
		x = 1
	}

	tree_header_text = {
		text = mio_header_armor
		x = 5
	}

	tree_header_text = {
		text = mio_header_engines
		x = 8
	}


	initial_trait = {
		name = generic_mio_initial_trait_modern_tank_designer

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.05
		}
		
		production_bonus = {
			production_capacity_factor = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_advanced_transmission
		name = generic_mio_trait_advanced_transmission
		icon = GFX_generic_mio_trait_icon_breakthrough

		position = { x=1 y=0 }
		
		equipment_bonus = {
			breakthrough = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_commander_optics
		name = generic_mio_trait_commander_optics
		icon = GFX_generic_mio_trait_icon_detection

		position = { x=0 y=1 }
		relative_position_id = generic_mio_trait_advanced_transmission

		all_parents = { generic_mio_trait_advanced_transmission }
		
		equipment_bonus = {
			breakthrough = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_simplified_turret_design
		name = generic_mio_trait_simplified_modern_turret_design
		icon = GFX_generic_mio_trait_icon_production_capacity

		position = { x=0 y=1 }
		relative_position_id = generic_mio_trait_commander_optics

		all_parents = { generic_mio_trait_commander_optics }
		
		production_bonus = {
			production_capacity_factor = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_heat_shells
		name = generic_mio_trait_heat_shells
		icon = GFX_generic_mio_trait_icon_hard_attack

		position = { x=-1 y=1 }
		relative_position_id = generic_mio_trait_simplified_turret_design

		all_parents = { generic_mio_trait_simplified_turret_design }
		
		equipment_bonus = {
			hard_attack = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_adv_aphe
		name = generic_mio_trait_adv_aphe
		icon = GFX_generic_mio_trait_icon_ap_attack

		position = { x=1 y=1 }
		relative_position_id = generic_mio_trait_simplified_turret_design

		all_parents = { generic_mio_trait_simplified_turret_design }
		
		equipment_bonus = {
			ap_attack = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_modern_hull_configuration
		name = generic_mio_trait_modern_hull_configuration
		icon = GFX_generic_mio_department_icon_tank_general_armor

		position = { x=1 y=1 }
		relative_position_id = generic_mio_trait_heat_shells

		any_parent = { generic_mio_trait_heat_shells generic_mio_trait_adv_aphe }
		
		equipment_bonus = {
			build_cost_ic = -0.05
		}
	}

	trait = {
		token = generic_mio_trait_armor_steel_working
		name = generic_mio_trait_armor_composite_armor_experimentation
		icon = GFX_generic_mio_trait_icon_production_capacity

		position = { x=4 y=0 }
		relative_position_id = generic_mio_trait_advanced_transmission
		
		equipment_bonus = {
			defense = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_spaced_armor
		name = generic_mio_trait_advanced_angled_hull
		icon = GFX_generic_mio_trait_icon_armor_value

		position = { x=-1 y=2 }
		relative_position_id = generic_mio_trait_armor_steel_working

		all_parents = { generic_mio_trait_armor_steel_working }

		mutually_exclusive = { generic_mio_trait_crew_survival_layout generic_mio_trait_sloped_side_armor }
		
		equipment_bonus = {
			armor_value = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_crew_survival_layout
		name = generic_mio_trait_advanced_smoke_screen_layout
		icon = GFX_generic_mio_trait_icon_defense		

		position = { x=1 y=0 }
		relative_position_id = generic_mio_trait_spaced_armor

		all_parents = { generic_mio_trait_armor_steel_working }

		mutually_exclusive = { generic_mio_trait_spaced_armor generic_mio_trait_sloped_side_armor }
		
		equipment_bonus = {
			breakthrough = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_sloped_side_armor
		name = generic_mio_trait_all_or_nothing_armor_scheme
		icon = GFX_generic_mio_trait_icon_breakthrough

		position = { x=2 y=0 }
		relative_position_id = generic_mio_trait_spaced_armor

		all_parents = { generic_mio_trait_armor_steel_working }

		mutually_exclusive = { generic_mio_trait_spaced_armor generic_mio_trait_crew_survival_layout }
		
		equipment_bonus = {
			defense = 0.05
			maximum_speed = 0.05
			armor_value = -0.1
		}
	}

	trait = {
		token = generic_mio_trait_truck_engines
		name = generic_mio_trait_frontal_engine
		icon = GFX_generic_mio_trait_icon_reliability

		position = { x=2 y=0 }
		relative_position_id = generic_mio_trait_armor_steel_working

		mutually_exclusive = { generic_mio_trait_aircraft_engines }
		
		equipment_bonus = {
			reliability = -0.05
			defense = 0.1
		}
	}

	trait = {
		token = generic_mio_trait_aircraft_engines
		name = generic_mio_trait_advanced_engines
		icon = GFX_generic_mio_trait_icon_maximum_speed

		position = { x=2 y=0 }
		relative_position_id = generic_mio_trait_truck_engines

		mutually_exclusive = { generic_mio_trait_truck_engines }
		
		equipment_bonus = {
			maximum_speed = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_improved_suspension
		name = generic_mio_trait_advanced_suspension
		icon = GFX_generic_mio_trait_icon_reliability

		position = { x=1 y=1 }
		relative_position_id = generic_mio_trait_truck_engines

		any_parent = { generic_mio_trait_truck_engines generic_mio_trait_aircraft_engines }

		equipment_bonus = {
			reliability = 0.05
		}
	}
}

GER_krauss_maffei = {

	include = generic_modern_tank_organization
	icon = GFX_idea_krauss_maffei
	name = GER_krauss_maffei
	allowed = {	
		tag = GER 
	}		
}

USA_gdls = {

	include = generic_modern_tank_organization
	icon = GFX_idea_gdls
	name = USA_gdls
	allowed = {	
		tag = USA 
	}		
}

ENG_leyland = {

	include = generic_modern_tank_organization
	icon = GFX_idea_leyland
	name = ENG_leyland
	allowed = {	
		tag = ENG 
	}		
}

JAP_mitsubishi_heavy_industries = {

	include = generic_modern_tank_organization
	icon = GFX_idea_mitsubishi
	name = JAP_mitsubishi_heavy_industries
	allowed = {	
		tag = JAP 
	}		
}

SOV_uralvagonzavod = {

	include = generic_modern_tank_organization
	icon = GFX_idea_uralvagonzavod
	name = SOV_uralvagonzavod
	allowed = {	
		original_tag = SOV 
	}		
	
	add_trait = { 
		token = SOV_mio_trait_merge_plant_no_174
		name = SOV_merge_tank_plant
		#icon = GFX_generic_mio_department_icon_facilities
		icon = GFX_generic_mio_trait_icon_maximum_speed
		special_trait_background = yes

		position = { x=@tank_1_X y=@tank_1_Y }
		
		visible = {
			FROM = { original_tag = SOV }
		}

		available = { #Two FROM blocs to provide two different check marks in the UI
			FROM = {
				has_full_control_of_state = 195 #LENINGRAD
			}
			FROM = {
				has_completed_focus = SOV_merge_tank_and_materiel_plants
			}
		}

		on_complete = {
			custom_effect_tooltip = SOV_trait_will_not_be_available_in_other_organizations
			FROM = {
				set_country_flag = SOV_merge_plant_no_174_flag
			}
		}

		equipment_bonus = {
			maximum_speed = @tank_max_speed
		}
	}

	add_trait = { 
		token = SOV_mio_trait_merge_plant_no_112
		name = SOV_merge_tank_plant_2
		#icon = GFX_generic_mio_department_icon_facilities
		icon = GFX_generic_mio_trait_icon_production_capacity
		special_trait_background = yes

		position = { x=@tank_2_X y=@tank_2_Y }
		
		visible = {
			FROM = { original_tag = SOV }
		}

		available = {
			FROM = {
				has_full_control_of_state = 252 #GORKY
			}
			FROM = {
				has_completed_focus = SOV_merge_tank_and_materiel_plants
			}
		}

		on_complete = {
			custom_effect_tooltip = SOV_trait_will_not_be_available_in_other_organizations
			FROM = {
				set_country_flag = SOV_merge_plant_no_112_flag
			}
		}

		production_bonus = {
			production_capacity_factor = @tank_production_capacity_factor
		}
	}

	add_trait = { 
		token = SOV_mio_trait_merge_ural_heavy_machine_building_plant
		name = SOV_merge_tank_plant_3
		#icon = GFX_generic_mio_department_icon_facilities
		icon = GFX_generic_mio_trait_icon_soft_attack
		special_trait_background = yes

		position = { x=@tank_3_X y=@tank_3_Y }
		
		visible = {
			FROM = { original_tag = SOV }
		}

		available = {
			FROM = {
				has_full_control_of_state = 653 #SVERDLOVSK
			}
			FROM = {
				has_completed_focus = SOV_merge_tank_and_materiel_plants
			}
		}

		on_complete = {
			custom_effect_tooltip = SOV_trait_will_not_be_available_in_other_organizations
			FROM = {
				set_country_flag = SOV_merge_ural_heavy_machine_building_plant_flag
			}
		}

		equipment_bonus = {
			soft_attack = @tank_soft_attack
		}
	}
}

CHI_baotou_tank_plant = { #This plant was built with Soviet assistance so maybe it could be unlocked by a focus in the 1945 scenario

	include = generic_modern_tank_organization
	icon = GFX_idea_baotou_tank_plant
	name = CHI_baotou_tank_plant
	allowed = {			
		tag = PRC
	}		
	available = {
		owner = { 
			controls_state = 621 		
			OR = {
				has_completed_focus = CHI_joint_tank_development 
				has_completed_focus = PRC_socialist_market_economy 
			}
		}
	}
}

CHI_shaanxi_weiyang_engine_plant = { 

	include = generic_tank_organization
	icon = GFX_idea_shaanxi_weiyang_engine_plant
	name = CHI_shaanxi_weiyang_engine_plant
	allowed = {	
		OR = {
			is_literally_china = yes
			tag = MAN
			tag = MEN
		} 		
	}		
	available = {
		owner = { 
			controls_state = 744 		
			OR = {
				has_completed_focus = CHI_tank_plant 
				has_completed_focus = PRC_socialist_market_economy 
			}
		}
	}
}

CHI_harbin_plant_674 = { 

	include = generic_tank_refurbishment_plant_organization
	icon = GFX_idea_harbin_plant_674
	name = CHI_harbin_plant_674
	allowed = {	
		tag = PRC	
	}	
	available = {
		owner = { 
			controls_state = 328 		
			OR = {
				has_completed_focus = CHI_joint_tank_development 
				has_completed_focus = PRC_socialist_market_economy 
			}
		}
	}
}

#####################

 ## #  # ### ###   ## 
#   #  #  #  #  # #   
 #  ####  #  ###   #  
  # #  #  #  #      # 
##  #  # ### #    ##  
 
#####################

# GER_hdw = {

	# include = generic_submarine_organization
	# icon = GFX_idea_hdw
	# name = GER_hdw
	# allowed = {	
		# tag = GER 
	# }	
	
# }

GER_ag_wesser = {

	include = generic_escort_ship_organization
	icon = GFX_idea_ag_wesser
	name = GER_ag_wesser
	allowed = {	
		tag = GER 
	}	
	
}

CHI_dalian_shipyard = { 

	include = generic_refurbishment_repair_organization
	icon = GFX_idea_dalian_shipyard
	name = CHI_dalian_shipyard
	allowed = {			
		OR = {
			is_literally_china = yes
			tag = MAN
			tag = MEN
		} 			
	}		
	available = {
		owner = { 
			controls_state = 745 
			OR = {
				has_completed_focus = CHI_order_destroyers 
				has_completed_focus = PRC_socialist_market_economy 
			}
		}
	}
}

CHI_taiwan_shipbuilding_corporation = {

	include = generic_escort_ship_organization
	icon = GFX_idea_taiwan_shipbuilding_corporation
	name = CHI_taiwan_shipbuilding_corporation
	allowed = {	
		OR = {
			is_literally_china = yes
			tag = MAN
			tag = MEN
		} 			
	}	
	available = {
		owner = { 
			controls_state = 524 			
			OR = {
				has_completed_focus = CHI_light_cruiser_project 
				has_completed_focus = PRC_socialist_market_economy 
			}
		}
	}	
}

CHI_bohai_shipyard = {

	include = generic_submarine_organization
	icon = GFX_idea_bohai_shipyard
	name = CHI_bohai_shipyard
	allowed = {	
		OR = {
			is_literally_china = yes
			tag = MAN
			tag = MEN
		} 				
	}	
	available = {
		owner = { 
			controls_state = 716 
			OR = {
				has_completed_focus = CHI_modern_submarines
				has_completed_focus = PRC_socialist_market_economy 
			}
		}
	}
	
}

generic_light_carrier_designer = {
	
	name = light_carrier_designer
	icon = GFX_idea_generic_naval_manufacturer_2
	
	allowed = {
		always = no # Archetype only - countries using it have their own verisons
	}
	
	equipment_type = {
		mio_cat_eq_all_carrier
		mio_cat_eq_all_helicopter_carrier
	}

	research_categories = { mio_cat_tech_all_carrier_and_modules }
	
	tree_header_text = {
		text = mio_header_hull
		x = 0
	}
	
	tree_header_text = {
		text = mio_header_deck
		x = 3
	}
	
	tree_header_text = {
		text = mio_header_systems
		x = 7
	}
	
	initial_trait = {
		name = generic_light_carrier_designer_initial_trait_light_carrier
		
		limit_to_equipment_type = { ship_hull_carrier  }
		
		equipment_bonus = {
			carrier_size = -1
			build_cost_ic = -0.15
		}
	}		

	trait = {
		token = generic_mio_trait_edge_elevator
		name = generic_mio_trait_edge_elevator
		icon = GFX_generic_mio_trait_icon_reliability

		mutually_exclusive = { generic_mio_trait_simplified_hangar_design }
		
		position = { x=2 y=0 }

		limit_to_equipment_type = { mio_cat_eq_all_helicopter_carrier mio_cat_eq_all_carrier }
		
		equipment_bonus = {
			reliability = 0.05
		}
	}	

	trait = {
		token = generic_mio_trait_simplified_hangar_design
		name = generic_mio_trait_simplified_hangar_design
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		mutually_exclusive = { generic_mio_trait_edge_elevator }
		
		position = { x=4 y=0 }

		limit_to_equipment_type = { mio_cat_eq_all_helicopter_carrier mio_cat_eq_all_carrier }
		
		equipment_bonus = {
			build_cost_ic = -0.05
		}
	}

	trait = {
		token = generic_mio_trait_reinforced_deck
		name = generic_mio_trait_reinforced_deck
		icon = GFX_generic_mio_trait_icon_armor_value

		any_parent = { generic_mio_trait_edge_elevator generic_mio_trait_simplified_hangar_design }
		
		position = { x=3 y=1 }

		limit_to_equipment_type = { mio_cat_eq_all_helicopter_carrier mio_cat_eq_all_carrier }
		
		equipment_bonus = {
			armor_value = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_ski_jump
		name = generic_mio_trait_ski_jump
		icon = GFX_generic_mio_trait_icon_anti_air_attack

		all_parents = { generic_mio_trait_reinforced_deck }
		
		mutually_exclusive = { generic_mio_trait_angled_deck }
		
		position = { x=2 y=3 }

		limit_to_equipment_type = { mio_cat_eq_all_helicopter_carrier }
		
		equipment_bonus = {
			anti_air_attack = 0.08
		}
	}

	trait = {
		token = generic_mio_trait_angled_deck
		name = generic_mio_trait_angled_deck
		icon = GFX_generic_mio_trait_icon_reliability

		all_parents = { generic_mio_trait_reinforced_deck }
		
		mutually_exclusive = { generic_mio_trait_ski_jump }
		
		position = { x=4 y=3 }

		limit_to_equipment_type = { mio_cat_eq_all_helicopter_carrier  }
		
		equipment_bonus = {
			reliability = 0.1
		}
	}

	trait = {
		token = generic_mio_trait_asw_combat_room
		name = generic_mio_trait_asw_combat_room
		icon = GFX_generic_mio_trait_icon_sub_visibility
		
		mutually_exclusive = { generic_mio_trait_surface_combat_room generic_mio_trait_air_ops_room }
		
		position = { x=5 y=0 }

		limit_to_equipment_type = { mio_cat_eq_all_helicopter_carrier  }
		
		equipment_bonus = {
			sub_detection = 0.05
			sub_attack = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_surface_combat_room
		name = generic_mio_trait_surface_combat_room
		icon = GFX_generic_mio_department_icon_ship_screen_ship_offense
		
		mutually_exclusive = { generic_mio_trait_asw_combat_room generic_mio_trait_air_ops_room }
		
		position = { x=7 y=0 }

		limit_to_equipment_type = { mio_cat_eq_all_helicopter_carrier  }
		
		equipment_bonus = {
			lg_attack = 0.05
			hg_attack = 0.05
			surface_detection = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_air_ops_room
		name = generic_mio_trait_air_ops_room
		icon = GFX_generic_mio_trait_icon_anti_air_attack
		
		mutually_exclusive = { generic_mio_trait_asw_combat_room generic_mio_trait_surface_combat_room }
		
		position = { x=9 y=0 }

		limit_to_equipment_type = { mio_cat_eq_all_helicopter_carrier  }
		
		equipment_bonus = {
			anti_air_attack = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_cruiser_carrier_design
		name = generic_mio_trait_cruiser_carrier_design
		icon = GFX_generic_mio_department_icon_ship_capital_ship_offense
		
		mutually_exclusive = { generic_mio_trait_dedicated_carrier_design }
		
		any_parent = { generic_mio_trait_asw_combat_room generic_mio_trait_surface_combat_room generic_mio_trait_air_ops_room }
		
		position = { x=6 y=2 }

		limit_to_equipment_type = { mio_cat_eq_all_helicopter_carrier  }
		
		equipment_bonus = {
			defense = -0.1
			build_cost_ic = -0.05
			maximum_speed = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_dedicated_carrier_design
		name = generic_mio_trait_dedicated_carrier_design
		icon = GFX_generic_mio_department_icon_ship_carrier_offense
		
		mutually_exclusive = { generic_mio_trait_cruiser_carrier_design }
		
		any_parent = { generic_mio_trait_asw_combat_room generic_mio_trait_surface_combat_room generic_mio_trait_air_ops_room }
		
		position = { x=8 y=2 }

		limit_to_equipment_type = { mio_cat_eq_all_helicopter_carrier  }
		
		equipment_bonus = {
			defense = 0.1
			build_cost_ic = 0.05
			maximum_speed = -0.05
		}
	}

	trait = {
		token = generic_mio_trait_modern_combat_control_center
		name = generic_mio_trait_modern_combat_control_center
		icon = GFX_generic_mio_trait_icon_surface_visibility
		
		any_parent = { generic_mio_trait_dedicated_carrier_design generic_mio_trait_cruiser_carrier_design }
		
		position = { x=7 y=3 }

		limit_to_equipment_type = { mio_cat_eq_all_helicopter_carrier  }
		
		equipment_bonus = {
			naval_light_gun_hit_chance_factor = 0.1
			naval_heavy_gun_hit_chance_factor = 0.1
		}
	}

	trait = {
		token = generic_mio_trait_streamlined_design
		name = generic_mio_trait_streamlined_design
		icon = GFX_generic_mio_trait_icon_maximum_speed
			
		position = { x=0 y=0 }

		limit_to_equipment_type = { mio_cat_eq_all_helicopter_carrier mio_cat_eq_all_carrier }
		
		equipment_bonus = {
			surface_visibility = -0.05
			naval_speed = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_advanced_fuel_facilities
		name = generic_mio_trait_advanced_fuel_facilities
		icon = GFX_generic_mio_trait_icon_fuel_consumption
			
		position = { x=0 y=3 }
		
		all_parents = { generic_mio_trait_streamlined_design }
		
		limit_to_equipment_type = { mio_cat_eq_all_helicopter_carrier mio_cat_eq_all_carrier }
		
		equipment_bonus = {
			naval_range = 0.1
			fuel_consumption = -0.03
		}
	}	

	trait = {
		token = generic_mio_trait_cost_efficiency_focus
		name = generic_mio_trait_cost_efficiency_focus
		icon = GFX_generic_mio_trait_icon_efficiency_gain
			
		position = { x=4 y=4 }
		
		all_parents = { generic_mio_trait_advanced_fuel_facilities generic_mio_trait_modern_combat_control_center }
		any_parent = { generic_mio_trait_angled_deck generic_mio_trait_ski_jump }
		
		limit_to_equipment_type = { mio_cat_eq_all_helicopter_carrier mio_cat_eq_all_carrier }
		
		equipment_bonus = {
			defense = -0.03
			build_cost_ic = -0.08
		}
	}
	
}

GER_bremer_vulkan = {

	include = generic_light_carrier_designer
	icon = GFX_idea_bremer_vulkan
	name = GER_bremer_vulkan
	allowed = {	
		tag = GER			
	}	
	available = {
		owner = { 
			controls_state = 59 
			OR = {
				has_completed_focus = GER_construct_aircraft_carriers
				has_completed_focus = GER_seeherrschaft 
			}
		}
	}	
}

ENG_vickers_armstrong = {

	include = generic_light_carrier_designer
	icon = GFX_idea_vickers_armstrong
	name = ENG_vickers_armstrong
	allowed = {	
		tag = ENG			
	}	
	# available = {
	
	# }	
}

ITA_ansaldo = {

	include = generic_light_carrier_designer
	icon = GFX_idea_ansaldo
	name = ITA_ansaldo
	allowed = {	
		tag = ITA			
	}	
	# available = {
	
	# }	
}

USA_puget_sound = {

	include = generic_light_carrier_designer
	icon = GFX_idea_puget_sound
	name = USA_puget_sound
	allowed = {	
		tag = USA
	}	
	available = {
		owner = { 
			controls_state = 386
		}
	}
}

SOV_shipyard_444 = {

	include = generic_light_carrier_designer
	icon = GFX_idea_SOV_444_shipyard
	name = SOV_shipyard_444
	allowed = {	
		tag = SOV			
	}	
	
	available = {
		owner = { 
			controls_state = 197 
			has_completed_focus = SOV_expand_the_morskaya_aviatsiya
		}
	}	
	
}

JAP_asano_shipbuilding = {

	include = generic_light_carrier_designer
	icon = GFX_idea_asano_shipbuilding
	name = JAP_asano_shipbuilding
	allowed = {	
		tag = JAP			
	}		
	
}

FRA_DCAN = {

	include = generic_light_carrier_designer
	icon = GFX_idea_DCAN
	name = FRA_DCAN
	allowed = {	
		tag = FRA			
	}		
	
}

###########################

###  #    ##  #  # ###  ## 
#  # #   #  # ## # #   #   
###  #   #### # ## ##   #  
#    #   #  # #  # #     # 
#    ### #  # #  # ### ##  

###########################

USA_republic_aviation_organization = {
	icon = GFX_idea_republic
	
	allowed = {	
		tag = USA 
	}

	equipment_type = {
		mio_cat_eq_all_small_plane
	}

	research_categories = { mio_cat_all_light_aircraft_and_modules }
	
	tree_header_text = {
		text = mio_header_light_aircraft
		x = 4
	}

	initial_trait = {
		name = USA_republic_aviation_initial_trait_multi_role_fighter_designer

		limit_to_equipment_type = { mio_cat_eq_all_small_plane }

		equipment_bonus = {
			air_ground_attack = 0.02
			naval_strike_attack = 0.02
			air_attack = 0.02
			air_defence = 0.02
		}
	}

	trait = {
		token = generic_mio_trait_armored_cockpit
		name = generic_mio_trait_armored_cockpit
		icon = GFX_generic_mio_trait_icon_reliability

		position = { x=3 y=0 }

		limit_to_equipment_type = { mio_cat_eq_all_small_plane mio_cat_eq_all_medium_plane }

		equipment_bonus = {
			air_defence = 0.05
			reliability = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_escort_designs
		name = generic_mio_trait_escort_designs
		icon = GFX_generic_mio_trait_icon_naval_range

		position = { x=2 y=0 }
		relative_position_id = generic_mio_trait_armored_cockpit

		limit_to_equipment_type = { mio_cat_eq_all_small_plane mio_cat_eq_all_medium_plane }

		equipment_bonus = {
			air_range = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_light_airframe
		name = republic_mio_trait_multirole_fighter
		icon = GFX_generic_mio_department_icon_plane_light_line_efficiency

		position = { x=1 y=1 }
		relative_position_id = generic_mio_trait_armored_cockpit

		all_parents = { generic_mio_trait_armored_cockpit generic_mio_trait_escort_designs }

		limit_to_equipment_type = { mio_cat_eq_all_small_plane }

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.05
		}

		production_bonus = {
			production_efficiency_gain_factor = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_hardened_frames
		name = generic_mio_trait_hardened_frames
		icon = GFX_generic_mio_trait_icon_defense

		position = { x=-2 y=1 }
		relative_position_id = generic_mio_trait_light_airframe

		all_parents = { generic_mio_trait_light_airframe }

		limit_to_equipment_type = { mio_cat_eq_all_small_plane }

		equipment_bonus = {
			air_defence = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_belly_shackles
		name = generic_mio_trait_belly_shackles
		icon = GFX_generic_mio_department_icon_plane_light_combat

		position = { x=1 y=0 }
		relative_position_id = generic_mio_trait_hardened_frames

		all_parents = { generic_mio_trait_light_airframe }

		limit_to_equipment_type = { mio_cat_eq_all_small_plane }

		equipment_bonus = {
			air_ground_attack = 0.05
			naval_strike_attack = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_oversized_propeller
		name = generic_mio_trait_oversized_propeller
		icon = GFX_generic_mio_trait_icon_maximum_speed

		position = { x=0 y=2 }
		relative_position_id = generic_mio_trait_light_airframe

		all_parents = { generic_mio_trait_light_airframe }

		limit_to_equipment_type = { mio_cat_eq_all_small_plane }

		equipment_bonus = {
			maximum_speed = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_upgraded_engines
		name = generic_mio_trait_upgraded_engines
		icon = GFX_generic_mio_department_icon_plane_general_engine

		position = { x=1 y=1 }
		relative_position_id = generic_mio_trait_light_airframe

		any_parent = { generic_mio_trait_light_airframe }

		limit_to_equipment_type = { mio_cat_eq_all_small_plane mio_cat_eq_all_medium_plane }

		equipment_bonus = {
			maximum_speed = 0.05
			air_agility = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_not_enough_guns_never_enough_guns
		name = generic_mio_trait_not_enough_guns_never_enough_guns
		icon = GFX_generic_mio_department_icon_plane_general_combat

		position = { x=1 y=0 }
		relative_position_id = generic_mio_trait_upgraded_engines

		any_parent = { generic_mio_trait_light_airframe }

		limit_to_equipment_type = { mio_cat_eq_all_small_plane mio_cat_eq_all_medium_plane }

		equipment_bonus = {
			air_attack = 0.05
			air_ground_attack = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_lengthened_wings
		name = generic_mio_trait_lengthened_wings
		icon = GFX_generic_mio_trait_icon_naval_range

		position = { x=0 y=1 }
		relative_position_id = generic_mio_trait_upgraded_engines

		all_parents = { generic_mio_trait_upgraded_engines }

		limit_to_equipment_type = { mio_cat_eq_all_small_plane mio_cat_eq_all_medium_plane }

		equipment_bonus = {
			air_range = 0.05
			air_attack = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_bubble_canopy
		name = generic_mio_trait_bubble_canopy
		icon = GFX_generic_mio_trait_icon_defense

		position = { x=0 y=1 }
		relative_position_id = generic_mio_trait_not_enough_guns_never_enough_guns

		all_parents = { generic_mio_trait_not_enough_guns_never_enough_guns }

		limit_to_equipment_type = { mio_cat_eq_all_small_plane mio_cat_eq_all_medium_plane }

		equipment_bonus = {
			air_defence = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_fighter_specialization
		name = generic_mio_trait_fighter_specialization
		icon = GFX_generic_mio_department_icon_plane_general_engine

		position = { x=-1 y=1 }
		relative_position_id = generic_mio_trait_lengthened_wings

		all_parents = { generic_mio_trait_lengthened_wings generic_mio_trait_bubble_canopy }

		mutually_exclusive = { generic_mio_trait_bomber_specialization }

		limit_to_equipment_type = { mio_cat_eq_all_small_plane mio_cat_eq_all_medium_plane }

		equipment_bonus = {
			air_attack = 0.05
			air_agility = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_bomber_specialization
		name = generic_mio_trait_bomber_specialization
		icon = GFX_generic_mio_department_icon_plane_general_combat

		position = { x=1 y=1 }
		relative_position_id = generic_mio_trait_bubble_canopy

		all_parents = { generic_mio_trait_lengthened_wings generic_mio_trait_bubble_canopy }

		mutually_exclusive = { generic_mio_trait_fighter_specialization }

		limit_to_equipment_type = { mio_cat_eq_all_small_plane mio_cat_eq_all_medium_plane }

		equipment_bonus = {
			air_ground_attack = 0.03
			naval_strike_attack = 0.03
			naval_strike_targetting = 0.03
		}
	}
	
	add_trait = {
		token = USA_mio_trait_rugged_construction
		name = USA_mio_trait_rugged_construction
		icon = GFX_generic_mio_trait_icon_defense
		special_trait_background = yes
		
		position = { x=0 y=1 }  
		relative_position_id = generic_mio_trait_hardened_frames
		
		any_parent = { generic_mio_trait_hardened_frames }
		
		limit_to_equipment_type = { mio_cat_eq_all_small_plane }
		
		equipment_bonus = {
			air_defence = 0.05
			reliability = 0.05
		}
	}
}

USA_northrop_organization = {

	include = generic_high_agility_fighter_aircraft_organization
	icon = GFX_idea_northrop
	name = USA_northrop_organization
	allowed = {	
		tag = USA 
	}	
	equipment_type = {
		mio_cat_eq_only_light_fighter_no_cv
		medium_plane_fighter_airframe
	}
	remove_trait = {
        generic_mio_trait_high_octane_fuels
    }	

	trait = {
		token = generic_mio_trait_fuel_injection_engines
		name = generic_mio_trait_sleek_fuselage
		icon = GFX_generic_mio_trait_icon_air_agility

		position = { x=0 y=2 }
		relative_position_id = generic_mio_trait_bigger_engines

		all_parents = { 
			generic_mio_trait_bigger_engines
		}

		equipment_bonus = {
			maximum_speed = 0.05
			air_agility = 0.025
		}
	}
	
	add_trait = {
		token = USA_mio_trait_unforgiving_agility
		name = USA_mio_trait_unforgiving_agility
		icon = GFX_generic_mio_trait_icon_air_agility
		special_trait_background = yes
		
		position = { x=1 y=1 }  
		relative_position_id = generic_mio_trait_bigger_engines
		
		any_parent = { generic_mio_trait_bigger_engines generic_mio_trait_cantilever_wing_structure }
		
		limit_to_equipment_type = { mio_cat_eq_all_small_plane }
		
		equipment_bonus = {
			air_agility = 0.05
			reliability = -0.1
		}
	}
}

USA_martin_aircraft = {

	include = generic_medium_aircraft_organization
	icon = GFX_idea_martin
	name = USA_martin_aircraft
	allowed = {	
		tag = USA 
	}	
	
}

JAP_tachikawa = {

	include = generic_medium_aircraft_organization
	icon = GFX_idea_tachikawa
	name = JAP_tachikawa
	allowed = {	
		tag = JAP 
	}	
	
}

JAP_kawanishi = {

	include = generic_general_aircraft_organization
	icon = GFX_idea_kawanishi
	name = JAP_kawanishi
	allowed = {	
		tag = JAP 
	}	
	
}

USA_convair_mio = {

	icon = GFX_idea_convair
	name = USA_convair_mio
	allowed = {	
		tag = USA 
	}	
	
	
	equipment_type = {
		mio_cat_eq_all_small_plane
		mio_cat_eq_all_medium_plane
		mio_cat_eq_all_large_plane
	}

	research_categories = { air_equipment }
	
	tree_header_text = {
		text = mio_header_fighter_aircraft
		x = 1
	}

	tree_header_text = {
		text = mio_header_bomber_aircraft
		x = 4
	}

	tree_header_text = {
		text = mio_header_naval_aircraft
		x = 7
	}

	initial_trait = {
		name = USA_convair_mio_trait_fast_aircraft_designer

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.05
		}
		production_bonus = {
			production_capacity_factor = 0.03
		}
	}

	trait = {
		token = convair_mio_trait_cutting_edge_experimentation
		name = convair_mio_trait_cutting_edge_experimentation
		icon = GFX_generic_mio_trait_icon_naval_range

		position = { x=4 y=0 }

		
		organization_modifier = { 
			military_industrial_organization_research_bonus = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_fighter_aircraft_speed
		name = generic_mio_trait_fighter_aircraft_speed
		icon = GFX_generic_mio_department_icon_plane_fighter_engine

		position = { x=-3 y=1 }
		relative_position_id = convair_mio_trait_cutting_edge_experimentation

		all_parents = { convair_mio_trait_cutting_edge_experimentation }

		limit_to_equipment_type = { mio_cat_eq_all_small_plane }

		equipment_bonus = {
			maximum_speed = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_streamlined_gun_mounts
		name = generic_mio_trait_streamlined_gun_mounts
		icon = GFX_generic_mio_trait_icon_anti_air_attack

		position = { x=-1 y=1 }
		relative_position_id = generic_mio_trait_fighter_aircraft_speed

		all_parents = { generic_mio_trait_fighter_aircraft_speed }

		mutually_exclusive = { generic_mio_trait_streamlined_bomb_mounts }

		limit_to_equipment_type = { mio_cat_eq_all_small_plane }

		equipment_bonus = {
			air_attack = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_streamlined_bomb_mounts
		name = generic_mio_trait_streamlined_bomb_mounts
		icon = GFX_generic_mio_trait_icon_air_ground_attack

		position = { x=1 y=1 }
		relative_position_id = generic_mio_trait_fighter_aircraft_speed

		all_parents = { generic_mio_trait_fighter_aircraft_speed }

		mutually_exclusive = { generic_mio_trait_streamlined_gun_mounts }

		limit_to_equipment_type = { mio_cat_eq_all_small_plane }

		equipment_bonus = {
			air_ground_attack = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_fighter_aircraft_production
		name = generic_mio_trait_fighter_aircraft_production
		icon = GFX_generic_mio_department_icon_plane_fighter_production

		position = { x=1 y=2 }
		relative_position_id = generic_mio_trait_streamlined_gun_mounts

		any_parent = { generic_mio_trait_streamlined_gun_mounts generic_mio_trait_streamlined_bomb_mounts }

		limit_to_equipment_type = { mio_cat_eq_only_light_fighter_no_cv medium_plane_fighter_airframe medium_plane_scout_plane_airframe }

		production_bonus = {
			production_capacity_factor = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_bomber_aircraft_specialists
		name = generic_mio_trait_convair_bomber_speed
		icon = GFX_generic_mio_department_icon_plane_general_engine

		position = { x=0 y=1 }
		relative_position_id = convair_mio_trait_cutting_edge_experimentation

		all_parents = { convair_mio_trait_cutting_edge_experimentation }

		limit_to_equipment_type = { mio_cat_eq_all_medium_plane }
		equipment_bonus = {
			maximum_speed = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_bomb_trucks
		name = generic_mio_streamlined_bomb_load
		icon = GFX_generic_mio_trait_icon_air_ground_attack

		position = { x=-1 y=1 }
		relative_position_id = generic_mio_trait_bomber_aircraft_specialists

		all_parents = { generic_mio_trait_bomber_aircraft_specialists }

		mutually_exclusive = { generic_mio_trait_fast_bombers }

		limit_to_equipment_type = { mio_cat_eq_all_medium_plane }

		equipment_bonus = {
			air_ground_attack = 0.03
		}
	}

	trait = {
		token = generic_mio_trait_fast_bombers
		name = generic_mio_trait_streamlined_extra_fuel
		icon = GFX_generic_mio_trait_icon_maximum_speed

		position = { x=1 y=1 }
		relative_position_id = generic_mio_trait_bomber_aircraft_specialists

		all_parents = { generic_mio_trait_bomber_aircraft_specialists }

		mutually_exclusive = { generic_mio_trait_bomb_trucks }

		limit_to_equipment_type = { mio_cat_eq_all_medium_plane }

		equipment_bonus = {
			air_range = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_bomber_aircraft_production
		name = generic_mio_trait_bomber_aircraft_production
		icon = GFX_generic_mio_department_icon_plane_medium_line_efficiency

		position = { x=1 y=2 }
		relative_position_id = generic_mio_trait_bomb_trucks

		any_parent = { generic_mio_trait_bomb_trucks generic_mio_trait_fast_bombers }

		limit_to_equipment_type = { mio_cat_eq_only_tactical_bomber }

		production_bonus = {
			production_capacity_factor = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_naval_aircraft_specialists
		name = generic_mio_trait_fast_strat
		icon = GFX_generic_mio_department_icon_plane_strategic_bomber_engine

		position = { x=3 y=1 }
		relative_position_id = convair_mio_trait_cutting_edge_experimentation

		all_parents = { convair_mio_trait_cutting_edge_experimentation }

		limit_to_equipment_type = { mio_cat_eq_only_strategic_bomber }

		equipment_bonus = {
			maximum_speed = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_naval_strike
		name = generic_mio_trait_streamlined_bomb_bays
		icon = GFX_generic_mio_trait_icon_strategic_attack

		position = { x=-1 y=1 }
		relative_position_id = generic_mio_trait_naval_aircraft_specialists

		all_parents = { generic_mio_trait_naval_aircraft_specialists }

		mutually_exclusive = { generic_mio_trait_naval_air_patrol }

		limit_to_equipment_type = { mio_cat_eq_only_strategic_bomber }

		equipment_bonus = {
			air_bombing = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_naval_air_patrol
		name = generic_mio_trait_streamlined_extra_fuel_l
		icon = GFX_generic_mio_trait_icon_maximum_speed

		position = { x=1 y=1 }
		relative_position_id = generic_mio_trait_naval_aircraft_specialists

		all_parents = { generic_mio_trait_naval_aircraft_specialists }

		mutually_exclusive = { generic_mio_trait_naval_strike }

		limit_to_equipment_type = { mio_cat_eq_only_strategic_bomber }

		equipment_bonus = {
			air_range = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_naval_aircraft_production
		name = generic_mio_trait_naval_aircraft_production
		icon = GFX_generic_mio_department_icon_plane_strategic_bomber_production

		position = { x=1 y=2 }
		relative_position_id = generic_mio_trait_naval_strike

		any_parent = { generic_mio_trait_naval_strike generic_mio_trait_naval_air_patrol }

		limit_to_equipment_type = { mio_cat_eq_only_strategic_bomber }

		production_bonus = {
			production_capacity_factor = 0.05
		}
	}
}

ENG_gloster_aircraft = {

	include = generic_light_aircraft_organization
	icon = GFX_idea_gloster
	name = ENG_gloster_aircraft
	allowed = {	
		tag = ENG 
	}		
}

SOV_sukhoi_design_bureau_organization = {
	include = USA_republic_aviation_organization
	icon = GFX_idea_sukhoi
	allowed = {	
		original_tag = SOV
	}

	add_trait = { 
		token = SOV_mio_trait_merge_plant_no_28
		name = SOV_merge_aircraft_plant_1
		#icon = GFX_generic_mio_department_icon_facilities
		icon = GFX_generic_mio_trait_icon_build_cost_ic
		special_trait_background = yes

		position = { x=@aircraft_1_X y=@aircraft_1_Y }
		
		visible = {
			FROM = { original_tag = SOV }
		}

		available = {
			FROM = {
				has_full_control_of_state = 251 #KUYBYSHEV
			}
			FROM = {
				has_completed_focus = SOV_merge_aircraft_plants
			}
		}

		on_complete = {
			custom_effect_tooltip = SOV_trait_will_not_be_available_in_other_organizations
			FROM = {
				set_country_flag = SOV_merge_plant_no_28_flag
			}
		}

		production_bonus = {
			production_cost_factor = @aircraft_production_cost_factor
		}
	}

	add_trait = { 
		token = SOV_mio_trait_merge_plant_no_150
		name = SOV_merge_aircraft_plant_2
		#icon = GFX_generic_mio_department_icon_facilities
		icon = GFX_generic_mio_trait_icon_air_agility
		special_trait_background = yes

		position = { x=@aircraft_2_X y=@aircraft_2_Y }
		
		visible = {
			FROM = { original_tag = SOV }
		}

		available = {
			FROM = {
				has_full_control_of_state = 219 #MOSCOW
			}
			FROM = {
				has_completed_focus = SOV_merge_aircraft_plants
			}
		}

		on_complete = {
			custom_effect_tooltip = SOV_trait_will_not_be_available_in_other_organizations
			FROM = {
				set_country_flag = SOV_merge_plant_no_150_flag
				add_resource = {
					type = aluminium
					amount = 3
					state = 219
				}
			}
		}

		equipment_bonus = {
			air_agility = @aircraft_air_agility
		}
	}

	add_trait = { 
		token = SOV_mio_trait_merge_vef_plant
		name = SOV_merge_aircraft_plant_3
		#icon = GFX_generic_mio_department_icon_facilities
		icon = GFX_generic_mio_trait_icon_detection
		special_trait_background = yes

		position = { x=@aircraft_3_X y=@aircraft_3_Y }
		
		visible = {
			FROM = { original_tag = SOV }
		}

		available = {
			FROM = {
				has_full_control_of_state = 808 #RIGA
			}
			FROM = {
				has_completed_focus = SOV_merge_aircraft_plants
			}
		}

		on_complete = {
			custom_effect_tooltip = SOV_trait_will_not_be_available_in_other_organizations
			FROM = {
				set_country_flag = SOV_merge_vef_plant_flag
				add_tech_bonus = {
					name = SOV_mio_trait_merge_vef_plant
					bonus = 1
					uses = 1
					category = radar_tech
				}
			}
		}

		equipment_bonus = {
			air_defence = @aircraft_air_defence
			surface_detection = @aircraft_surface_detection
			sub_detection = @aircraft_sub_detection
		}
	}
}

SOV_lavochkin_design_bureau_organization = {
	include = generic_range_focused_aircraft_organization
	icon = GFX_idea_lavochkin
	allowed = {	
		original_tag = SOV
	}

	add_trait = { 
		token = SOV_mio_trait_merge_plant_no_28
		name = SOV_merge_aircraft_plant_1
		#icon = GFX_generic_mio_department_icon_facilities
		icon = GFX_generic_mio_trait_icon_build_cost_ic
		special_trait_background = yes

		position = { x=@aircraft_1_X y=@aircraft_1_Y }
		
		visible = {
			FROM = { original_tag = SOV }
		}

		available = {
			FROM = {
				has_full_control_of_state = 251 #KUYBYSHEV
			}
			FROM = {
				has_completed_focus = SOV_merge_aircraft_plants
			}
		}

		on_complete = {
			custom_effect_tooltip = SOV_trait_will_not_be_available_in_other_organizations
			FROM = {
				set_country_flag = SOV_merge_plant_no_28_flag
			}
		}

		production_bonus = {
			production_cost_factor = @aircraft_production_cost_factor
		}
	}

	add_trait = { 
		token = SOV_mio_trait_merge_plant_no_150
		name = SOV_merge_aircraft_plant_2
		#icon = GFX_generic_mio_department_icon_facilities
		icon = GFX_generic_mio_trait_icon_air_agility
		special_trait_background = yes

		position = { x=@aircraft_2_X y=@aircraft_2_Y }
		
		visible = {
			FROM = { original_tag = SOV }
		}

		available = {
			FROM = {
				has_full_control_of_state = 219 #MOSCOW
			}
			FROM = {
				has_completed_focus = SOV_merge_aircraft_plants
			}
		}

		on_complete = {
			custom_effect_tooltip = SOV_trait_will_not_be_available_in_other_organizations
			FROM = {
				set_country_flag = SOV_merge_plant_no_150_flag
				add_resource = {
					type = aluminium
					amount = 3
					state = 219
				}
			}
		}

		equipment_bonus = {
			air_agility = @aircraft_air_agility
		}
	}

	add_trait = { 
		token = SOV_mio_trait_merge_vef_plant
		name = SOV_merge_aircraft_plant_3
		#icon = GFX_generic_mio_department_icon_facilities
		icon = GFX_generic_mio_trait_icon_detection
		special_trait_background = yes

		position = { x=@aircraft_3_X y=@aircraft_3_Y }
		
		visible = {
			FROM = { original_tag = SOV }
		}

		available = {
			FROM = {
				has_full_control_of_state = 808 #RIGA
			}
			FROM = {
				has_completed_focus = SOV_merge_aircraft_plants
			}
		}

		on_complete = {
			custom_effect_tooltip = SOV_trait_will_not_be_available_in_other_organizations
			FROM = {
				set_country_flag = SOV_merge_vef_plant_flag
				add_tech_bonus = {
					name = SOV_mio_trait_merge_vef_plant
					bonus = 1
					uses = 1
					category = radar_tech
				}
			}
		}

		equipment_bonus = {
			air_defence = @aircraft_air_defence
			surface_detection = @aircraft_surface_detection
			sub_detection = @aircraft_sub_detection
		}
	}
}

SOV_beriev_design_bureau_organization = {
	include = generic_naval_aircraft_organization
	icon = GFX_idea_beriev
	allowed = {	
		original_tag = SOV
	}

	add_trait = { 
		token = SOV_mio_trait_merge_plant_no_28
		name = SOV_merge_aircraft_plant_1
		#icon = GFX_generic_mio_department_icon_facilities
		icon = GFX_generic_mio_trait_icon_build_cost_ic
		special_trait_background = yes

		position = { x=@aircraft_1_X y=@aircraft_1_Y }
		
		visible = {
			FROM = { original_tag = SOV }
		}

		available = {
			FROM = {
				has_full_control_of_state = 251 #KUYBYSHEV
			}
			FROM = {
				has_completed_focus = SOV_merge_aircraft_plants
			}
		}

		on_complete = {
			custom_effect_tooltip = SOV_trait_will_not_be_available_in_other_organizations
			FROM = {
				set_country_flag = SOV_merge_plant_no_28_flag
			}
		}

		production_bonus = {
			production_cost_factor = @aircraft_production_cost_factor
		}
	}

	add_trait = { 
		token = SOV_mio_trait_merge_plant_no_150
		name = SOV_merge_aircraft_plant_2
		#icon = GFX_generic_mio_department_icon_facilities
		icon = GFX_generic_mio_trait_icon_air_agility
		special_trait_background = yes

		position = { x=@aircraft_2_X y=@aircraft_2_Y }
		
		visible = {
			FROM = { original_tag = SOV }
		}

		available = {
			FROM = {
				has_full_control_of_state = 219 #MOSCOW
			}
			FROM = {
				has_completed_focus = SOV_merge_aircraft_plants
			}
		}

		on_complete = {
			custom_effect_tooltip = SOV_trait_will_not_be_available_in_other_organizations
			FROM = {
				set_country_flag = SOV_merge_plant_no_150_flag
				add_resource = {
					type = aluminium
					amount = 3
					state = 219
				}
			}
		}

		equipment_bonus = {
			air_agility = @aircraft_air_agility
		}
	}

	add_trait = { 
		token = SOV_mio_trait_merge_vef_plant
		name = SOV_merge_aircraft_plant_3
		#icon = GFX_generic_mio_department_icon_facilities
		icon = GFX_generic_mio_trait_icon_detection
		special_trait_background = yes

		position = { x=@aircraft_3_X y=@aircraft_3_Y }
		
		visible = {
			FROM = { original_tag = SOV }
		}

		available = {
			FROM = {
				has_full_control_of_state = 808 #RIGA
			}
			FROM = {
				has_completed_focus = SOV_merge_aircraft_plants
			}
		}

		on_complete = {
			custom_effect_tooltip = SOV_trait_will_not_be_available_in_other_organizations
			FROM = {
				set_country_flag = SOV_merge_vef_plant_flag
				add_tech_bonus = {
					name = SOV_mio_trait_merge_vef_plant
					bonus = 1
					uses = 1
					category = radar_tech
				}
			}
		}

		equipment_bonus = {
			air_defence = @aircraft_air_defence
			surface_detection = @aircraft_surface_detection
			sub_detection = @aircraft_sub_detection
		}
	}
}

SOV_myasishchev_design_bureau_organization = {
	include = USA_convair_mio
	icon = GFX_idea_myasishchev
	allowed = {	
		original_tag = SOV
	}
	name = SOV_myasishchev_design_bureau_organization
	add_trait = { 
		token = SOV_mio_trait_merge_plant_no_28
		name = SOV_merge_aircraft_plant_1
		#icon = GFX_generic_mio_department_icon_facilities
		icon = GFX_generic_mio_trait_icon_build_cost_ic
		special_trait_background = yes

		position = { x=@aircraft_1_X y=@aircraft_1_Y }
		
		visible = {
			FROM = { original_tag = SOV }
		}

		available = {
			FROM = {
				has_full_control_of_state = 251 #KUYBYSHEV
			}
			FROM = {
				has_completed_focus = SOV_merge_aircraft_plants
			}
		}

		on_complete = {
			custom_effect_tooltip = SOV_trait_will_not_be_available_in_other_organizations
			FROM = {
				set_country_flag = SOV_merge_plant_no_28_flag
			}
		}

		production_bonus = {
			production_cost_factor = @aircraft_production_cost_factor
		}
	}

	add_trait = { 
		token = SOV_mio_trait_merge_plant_no_150
		name = SOV_merge_aircraft_plant_2
		#icon = GFX_generic_mio_department_icon_facilities
		icon = GFX_generic_mio_trait_icon_air_agility
		special_trait_background = yes

		position = { x=@aircraft_2_X y=@aircraft_2_Y }
		
		visible = {
			FROM = { original_tag = SOV }
		}

		available = {
			FROM = {
				has_full_control_of_state = 219 #MOSCOW
			}
			FROM = {
				has_completed_focus = SOV_merge_aircraft_plants
			}
		}

		on_complete = {
			custom_effect_tooltip = SOV_trait_will_not_be_available_in_other_organizations
			FROM = {
				set_country_flag = SOV_merge_plant_no_150_flag
				add_resource = {
					type = aluminium
					amount = 3
					state = 219
				}
			}
		}

		equipment_bonus = {
			air_agility = @aircraft_air_agility
		}
	}

	add_trait = { 
		token = SOV_mio_trait_merge_vef_plant
		name = SOV_merge_aircraft_plant_3
		#icon = GFX_generic_mio_department_icon_facilities
		icon = GFX_generic_mio_trait_icon_detection
		special_trait_background = yes

		position = { x=@aircraft_3_X y=@aircraft_3_Y }
		
		visible = {
			FROM = { original_tag = SOV }
		}

		available = {
			FROM = {
				has_full_control_of_state = 808 #RIGA
			}
			FROM = {
				has_completed_focus = SOV_merge_aircraft_plants
			}
		}

		on_complete = {
			custom_effect_tooltip = SOV_trait_will_not_be_available_in_other_organizations
			FROM = {
				set_country_flag = SOV_merge_vef_plant_flag
				add_tech_bonus = {
					name = SOV_mio_trait_merge_vef_plant
					bonus = 1
					uses = 1
					category = radar_tech
				}
			}
		}

		equipment_bonus = {
			air_defence = @aircraft_air_defence
			surface_detection = @aircraft_surface_detection
			sub_detection = @aircraft_sub_detection
		}
	}
}

SOV_peltyakov_organization = {
	include = generic_medium_aircraft_organization
	icon = GFX_idea_petlyakov
	allowed = {	
		original_tag = SOV
	}
	name = SOV_peltyakov_organization
	add_trait = { 
		token = SOV_mio_trait_merge_plant_no_28
		name = SOV_merge_aircraft_plant_1
		#icon = GFX_generic_mio_department_icon_facilities
		icon = GFX_generic_mio_trait_icon_build_cost_ic
		special_trait_background = yes

		position = { x=@aircraft_1_X y=@aircraft_1_Y }
		
		visible = {
			FROM = { original_tag = SOV }
		}

		available = {
			FROM = {
				has_full_control_of_state = 251 #KUYBYSHEV
			}
			FROM = {
				has_completed_focus = SOV_merge_aircraft_plants
			}
		}

		on_complete = {
			custom_effect_tooltip = SOV_trait_will_not_be_available_in_other_organizations
			FROM = {
				set_country_flag = SOV_merge_plant_no_28_flag
			}
		}

		production_bonus = {
			production_cost_factor = @aircraft_production_cost_factor
		}
	}

	add_trait = { 
		token = SOV_mio_trait_merge_plant_no_150
		name = SOV_merge_aircraft_plant_2
		#icon = GFX_generic_mio_department_icon_facilities
		icon = GFX_generic_mio_trait_icon_air_agility
		special_trait_background = yes

		position = { x=@aircraft_2_X y=@aircraft_2_Y }
		
		visible = {
			FROM = { original_tag = SOV }
		}

		available = {
			FROM = {
				has_full_control_of_state = 219 #MOSCOW
			}
			FROM = {
				has_completed_focus = SOV_merge_aircraft_plants
			}
		}

		on_complete = {
			custom_effect_tooltip = SOV_trait_will_not_be_available_in_other_organizations
			FROM = {
				set_country_flag = SOV_merge_plant_no_150_flag
				add_resource = {
					type = aluminium
					amount = 3
					state = 219
				}
			}
		}

		equipment_bonus = {
			air_agility = @aircraft_air_agility
		}
	}

	add_trait = { 
		token = SOV_mio_trait_merge_vef_plant
		name = SOV_merge_aircraft_plant_3
		#icon = GFX_generic_mio_department_icon_facilities
		icon = GFX_generic_mio_trait_icon_detection
		special_trait_background = yes

		position = { x=@aircraft_3_X y=@aircraft_3_Y }
		
		visible = {
			FROM = { original_tag = SOV }
		}

		available = {
			FROM = {
				has_full_control_of_state = 808 #RIGA
			}
			FROM = {
				has_completed_focus = SOV_merge_aircraft_plants
			}
		}

		on_complete = {
			custom_effect_tooltip = SOV_trait_will_not_be_available_in_other_organizations
			FROM = {
				set_country_flag = SOV_merge_vef_plant_flag
				add_tech_bonus = {
					name = SOV_mio_trait_merge_vef_plant
					bonus = 1
					uses = 1
					category = radar_tech
				}
			}
		}

		equipment_bonus = {
			air_defence = @aircraft_air_defence
			surface_detection = @aircraft_surface_detection
			sub_detection = @aircraft_sub_detection
		}
	}
}

GER_kurt_tank_design_team = {

	include = USA_northrop_organization
	icon = GFX_idea_kurt_tank
	name = GER_kurt_tank_design_team
	allowed = {	
		tag = GER 
	}		
}

# GER_arado = {

	# include = USA_convair_mio
	# icon = GFX_idea_arado
	# name = GER_arado
	# allowed = {	
		# tag = GER 
	# }		
# }

GER_horten = {

	include = USA_convair_mio
	icon = GFX_idea_horten
	name = GER_horten
	allowed = {	
		tag = GER 
	}		
}

FRA_dassault = {

	include = USA_northrop_organization
	icon = GFX_idea_dassault
	name = GER_dassault
	allowed = {	
		tag = FRA 
	}		
}

JAP_kawasaki_air = {

	include = USA_convair_mio
	icon = GFX_idea_kawasaki
	name = JAP_kawasaki_air
	allowed = {	
		tag = JAP 
	}		
}

CHI_chengdu_no_132_fighter_manufacturing_plant = { 

	include = generic_high_agility_fighter_aircraft_organization
	icon = GFX_idea_chengdu_no_132_fighter_manufacturing_plant
	name = CHI_chengdu_no_132_fighter_manufacturing_plant
	allowed = {			
		tag = PRC 	
	}		
	available = {
		owner = { 
		controls_state = 605 
			OR = {
				has_completed_focus = CHI_local_fighter_production 
				has_completed_focus = PRC_socialist_market_economy 
			}
		}
	}
}

CHI_xian_aircraft = { 

	include = generic_heavy_aircraft_organization
	icon = GFX_idea_xian_aircraft
	name = CHI_xian_aircraft
	allowed = {			
		tag = PRC 
	}		
	available = {
		owner = {  
			controls_state = 744
			OR = {
				has_completed_focus = CHI_local_bomber_production 
				has_completed_focus = PRC_socialist_market_economy 
			}
		}
	}	
}

CHI_shenyang_factory_112 = { 

	include = generic_medium_aircraft_organization
	icon = GFX_idea_shenyang_factory_112
	name = CHI_shenyang_factory_112
	allowed = {			
		OR = {
			is_literally_china = yes
			tag = MAN
			tag = MEN
		} 					
	}			
	available = {
		owner = { 
			controls_state = 716 		
			OR = {
				has_completed_focus = CHI_the_hump 
				has_completed_focus = PRC_socialist_market_economy 
			}
		}
	}
}
################################### 

#   #  ##  ### ### ###  ### ### #   
## ## #  #  #  #   #  #  #  #   #   
# # # ####  #  ##  ###   #  ##  #   
#   # #  #  #  #   #  #  #  #   #   
#   # #  #  #  ### #  # ### ### ### 


###################################

generic_rocketry_organization = {
	icon = GFX_idea_generic_artillery_manufacturer_2

	allowed = {
		always = no # Archetype only - countries using it have their own verisons
	}

	equipment_type = {		
		# guided_missile_equipment
		# rocket_interceptor_equipment
		# theater_missile_equipment
		mio_cat_eq_all_rockets
	}

	research_categories = {
		mio_cat_all_rockets
	}
	
	tree_header_text = {
		text = mio_header_guided_missiles
		x = 1
	}

	tree_header_text = {
		text = mio_header_rocket_interceptors
		x = 4
	}

	tree_header_text = {
		text = mio_header_tactical_missiles
		x = 7
	}

	initial_trait = {
		name = generic_mio_initial_trait_rocket_manufacturer

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.05
		}
		production_bonus = {
			production_cost_factor = -0.03
		}
	}

	trait = {
		token = generic_mio_stable_propelants
		name = generic_mio_stable_propelants
		icon = GFX_generic_mio_trait_icon_reliability

		position = { x=4 y=0 }
		
		limit_to_equipment_type = { mio_cat_eq_all_rockets }

		equipment_bonus = {
			reliability = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_high_speed_moving_surfaces
		name = generic_mio_trait_high_speed_moving_surfaces
		icon = GFX_generic_mio_trait_icon_air_agility

		position = { x=1 y=2 }
		relative_position_id = generic_mio_stable_propelants

		all_parents = { generic_mio_stable_propelants }
		mutually_exclusive = { generic_mio_trait_catapult_launcher }

		limit_to_equipment_type = { guided_missile_equipment slcm_equipment	sam_missile_equipment }
		
		equipment_bonus = {
			air_agility = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_catapult_launcher
		name = generic_mio_trait_catapult_launcher
		icon = GFX_generic_mio_trait_icon_maximum_speed

		position = { x=-1 y=2 }
		relative_position_id = generic_mio_stable_propelants

		all_parents = { generic_mio_stable_propelants }
		mutually_exclusive = { generic_mio_trait_high_speed_moving_surfaces }

		limit_to_equipment_type = { guided_missile_equipment slcm_equipment }
		
		equipment_bonus = {
			air_superiority = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_rocket_interceptor_construction
		name = generic_mio_trait_rocket_interceptor_construction
		icon = GFX_generic_mio_trait_icon_production_capacity

		position = { x=1 y=2 }
		relative_position_id = generic_mio_trait_catapult_launcher

		any_parent = { generic_mio_trait_catapult_launcher generic_mio_trait_high_speed_moving_surfaces }
		

		limit_to_equipment_type = { sam_missile_equipment }
		
		production_bonus = {
			production_cost_factor = -0.05
		}
	}

	trait = {
		token = generic_mio_efficient_propelant_mixing
		name = generic_mio_efficient_propelant_mixing
		icon = GFX_generic_mio_trait_icon_air_range

		position = { x=1 y=0 }
		
		limit_to_equipment_type = { mio_cat_eq_all_rockets }

		equipment_bonus = {
			air_range = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_increased_payload_delivery
		name = generic_mio_trait_increased_payload_delivery
		icon = GFX_generic_mio_trait_icon_strategic_attack

		position = { x=1 y=2 }
		relative_position_id = generic_mio_efficient_propelant_mixing

		all_parents = { generic_mio_efficient_propelant_mixing }
		mutually_exclusive = { generic_mio_trait_rocket_assembly_line }

		limit_to_equipment_type = { guided_missile_equipment slcm_equipment	ballistic_missile_equipment }
		
		equipment_bonus = {
			air_bombing = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_rocket_assembly_line
		name = generic_mio_trait_rocket_assembly_line
		icon = GFX_generic_mio_trait_icon_production_capacity

		position = { x=-1 y=2 }
		relative_position_id = generic_mio_efficient_propelant_mixing

		all_parents = { generic_mio_efficient_propelant_mixing }
		mutually_exclusive = { generic_mio_trait_increased_payload_delivery }

		limit_to_equipment_type = { mio_cat_eq_all_rockets }
		
		production_bonus = {
			production_cost_factor = -0.03
		}
	}

	trait = {
		token = generic_mio_trait_modern_engine_modeling
		name = generic_mio_trait_modern_engine_modeling
		icon = GFX_generic_mio_trait_icon_reliability

		position = { x=-1 y=2 }
		relative_position_id = generic_mio_trait_increased_payload_delivery

		any_parent = { generic_mio_trait_rocket_assembly_line generic_mio_trait_increased_payload_delivery }
		

		limit_to_equipment_type = { mio_cat_eq_all_rockets }
		
		equipment_bonus = {
			reliability = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_battery_logistics
		name = generic_mio_trait_battery_logistics
		icon = GFX_generic_mio_trait_icon_supply_consumption

		position = { x=7 y=0 }
		
		limit_to_equipment_type = { guided_missile_equipment ballistic_missile_equipment nuclear_missile_equipment sam_missile_equipment }

		equipment_bonus = {
			maximum_speed = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_synthetic_materials
		name = generic_mio_trait_synthetic_materials
		icon = GFX_generic_mio_trait_icon_resources

		position = { x=0 y=2 }
		relative_position_id = generic_mio_trait_battery_logistics

		all_parents = { generic_mio_trait_battery_logistics }
		
		limit_to_equipment_type = { mio_cat_eq_all_rockets }
		
		production_bonus = {
			production_resource_need_factor = -0.1
		}
	}

	trait = {
		token = generic_mio_trait_cruise_missile_line
		name = generic_mio_trait_cruise_missile_line
		icon = GFX_generic_mio_trait_icon_production_capacity

		position = { x=0 y=2 }
		relative_position_id = generic_mio_trait_synthetic_materials

		all_parents = { generic_mio_trait_synthetic_materials }
		

		limit_to_equipment_type = { guided_missile_equipment slcm_equipment }
		
		production_bonus = {
			production_cost_factor = -0.05
		}
	}
}

USA_marietta = {

	include = generic_rocketry_organization
	icon = GFX_idea_marietta
	name = USA_marietta
	allowed = {	
		tag = USA 
	}		
}

SOV_vympel = {

	include = generic_rocketry_organization
	icon = GFX_idea_vympel
	name = SOV_vympel
	allowed = {	
		tag = SOV 
	}		
}

GER_ruhrstahl = {

	include = generic_rocketry_organization
	icon = GFX_idea_ruhrstahl
	name = GER_ruhrstahl
	allowed = {	
		tag = GER 
	}		
}

###################################
######## Support Equipment ########
###################################

GER_ERMA = {

	include = generic_support_equipment_organization
	icon = GFX_idea_ERMA
	name = GER_ERMA
	allowed = {	
		tag = GER 
	}		
}

USA_ACME = {

	include = generic_support_equipment_organization
	icon = GFX_idea_ACME
	name = USA_ACME
	allowed = {	
		tag = USA 
	}		
}

USA_colt = {

	include = generic_support_equipment_organization
	icon = GFX_idea_colt
	name = USA_colt
	allowed = {	
		tag = USA 
	}		
}

CHI_kaohsiung_arsenal = {

	include = generic_support_equipment_organization
	icon = GFX_idea_kaohsiung_arsenal
	name = CHI_kaohsiung_arsenal
	allowed = {			
		OR = {
			is_literally_china = yes
			tag = MAN
			tag = MEN
		} 
	}			
	available = {
		owner = { controls_state = 524 }
	}
}

###################################
####### Infantry Equipment ########
###################################

CHI_state_factory_66 = { 

	include = generic_infantry_equipment_organization
	icon = GFX_idea_state_factory_66
	name = CHI_state_factory_66
	allowed = {	
		tag = PRC
	}	
	available = {
		owner = { 
			controls_state = 714 		
			OR = {
				has_completed_focus = CHI_invite_soviet_advisers 
				has_completed_focus = PRC_socialist_market_economy 
			}
		}
	}
}

###################################
######## Helicopter Equip #########
###################################

SOV_kamov = { 

	include = generic_helicopter_organization
	icon = GFX_idea_kamov
	name = SOV_kamov
	allowed = {	
		original_tag = SOV
	}	
	available = {
		owner = { 
			controls_state = 219 		
		}
	}
}